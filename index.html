<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>

  <link rel="stylesheet" href="style.css">

</head>

<body>

  <div class="menu">
    <button id="btn-insert" class="btn btn-submit" type="button">Cadastro de Usuarios</button>
    <button id="btn-list" class="btn btn-submit" type="button">Listar Usuarios</button>
  </div>

</body>


<script>
  async function getAllUsers() {
    const usersApi = await fetch('https://private-21e8de-rafaellucio.apiary-mock.com/users');
    const responseJson = await usersApi.json(); // JSON from the http response
    return responseJson;
  }

  const storage = sessionStorage.getItem('users');
  const editUserStorage = sessionStorage.getItem('editUser');

  if(!storage) {
    getAllUsers().then(data => {
      sessionStorage.setItem('users', JSON.stringify(data));
    })
  }

  if(editUserStorage) {
    sessionStorage.removeItem('editUser');
  }
  
</script>

<script>
  document.getElementById('btn-insert').addEventListener('click', () => {
    window.location.assign("cadUsuarios.html");
  })
  document.getElementById('btn-list').addEventListener('click', () => {
    window.location.assign("listaUsuarios.html");
  })
</script>
</html>